-- Table drop SQL
drop table MEMBER cascade constraints;
drop table GROUPS cascade constraints;
drop table BOARD cascade constraints;
drop table REPLY cascade constraints;
drop table CHAT cascade constraints;
drop table ADMIN cascade constraints;
drop table MASTER cascade constraints;
drop table FRIEND cascade constraints;
drop table MESSAGE cascade constraints;
drop table NOTICE cascade constraints;
drop table GROUP_MEMBER cascade constraints;
drop table GROUP_SINGO cascade constraints;
drop table BOARD_SINGO cascade constraints;
drop table REPLY_SINGO cascade constraints;
drop table FRIEND_REQUEST cascade constraints;
drop table ONE_RANDOM_CHAT cascade constraints;
drop table GROUP_RAMDOM_CHAT cascade constraints;
drop table GROUP_JOIN cascade constraints;
drop table GROUP_ADMIN cascade constraints;



-- member Table Create SQL
CREATE TABLE member
(
    member_id               VARCHAR2(50)     NOT NULL, 
    member_pw               VARCHAR2(50)     NOT NULL, 
    member_nick             VARCHAR2(50)     NOT NULL, 
    member_img              VARCHAR2(200)    NULL, 
    member_interest         VARCHAR2(255)    NULL, 
    member_info_open        NUMBER           NOT NULL, 
    member_login_time       TIMESTAMP        NOT NULL, 
    member_logout_time      TIMESTAMP        NOT NULL, 
    member_present_login    NUMBER           NOT NULL, 
    CONSTRAINT MEMBER_PK PRIMARY KEY (member_id)
);


-- group Table Create SQL
CREATE TABLE groups
(
    group_num          NUMBER            NOT NULL, 
    group_name         VARCHAR2(50)      NOT NULL, 
    group_img          VARCHAR2(200)     NULL, 
    group_info         VARCHAR2(1000)    NULL, 
    group_info_open    NUMBER            NOT NULL, 
    group_interest     VARCHAR2(255)     NULL, 
    group_singo_cnt    NUMBER            NOT NULL, 
    CONSTRAINT GROUPS_PK PRIMARY KEY (group_num)
);


CREATE SEQUENCE groups_SEQ
START WITH 1
INCREMENT BY 1;

-- board Table Create SQL
CREATE TABLE board
(
    group_num           INT               NOT NULL, 
    board_num           INT               NOT NULL, 
    member_id           VARCHAR2(50)      NOT NULL, 
    board_content       VARCHAR2(4000)    NOT NULL, 
    board_file          VARCHAR2(200)     NULL, 
    board_time          TIMESTAMP         NOT NULL, 
    board_singo_flag    NUMBER            NOT NULL, 
    board_like          NUMBER            NOT NULL, 
    board_cnt           INT               NOT NULL, 
    CONSTRAINT BOARD_PK PRIMARY KEY (board_num)
);


CREATE SEQUENCE board_SEQ
START WITH 1
INCREMENT BY 1;


ALTER TABLE board
    ADD CONSTRAINT board_fk FOREIGN KEY (group_num)
        REFERENCES groups (group_num);


ALTER TABLE board
    ADD CONSTRAINT board_fkk FOREIGN KEY (member_id)
        REFERENCES member (member_id);



-- reply Table Create SQL
CREATE TABLE reply
(
    reply_num           INT               NOT NULL, 
    board_num           INT               NOT NULL, 
    member_id           VARCHAR2(50)      NOT NULL, 
    reply_content       VARCHAR2(1000)    NOT NULL, 
    reply_time          TIMESTAMP         NOT NULL, 
    reply_singo_flag    NUMBER            NOT NULL, 
    CONSTRAINT REPLY_PK PRIMARY KEY (reply_num)
);


CREATE SEQUENCE reply_SEQ
START WITH 1
INCREMENT BY 1;


ALTER TABLE reply
    ADD CONSTRAINT reply_fk FOREIGN KEY (board_num)
        REFERENCES board (board_num);


ALTER TABLE reply
    ADD CONSTRAINT reply_fkk FOREIGN KEY (member_id)
        REFERENCES member (member_id);



-- chat Table Create SQL
CREATE TABLE chat
(
    chat_num     INT              NOT NULL, 
    member_id    VARCHAR2(255)    NOT NULL, 
    CONSTRAINT CHAT_PK PRIMARY KEY (chat_num, member_id)
);


CREATE SEQUENCE chat_SEQ
START WITH 1
INCREMENT BY 1;


ALTER TABLE chat
    ADD CONSTRAINT chat_fk FOREIGN KEY (member_id)
        REFERENCES member (member_id);



-- admin Table Create SQL
CREATE TABLE admin
(
    admin_id    VARCHAR2(50)    NOT NULL, 
    admin_pw    VARCHAR2(50)    NOT NULL, 
    CONSTRAINT ADMIN_PK PRIMARY KEY (admin_id)
);



-- master Table Create SQL
CREATE TABLE master
(
    master_id    VARCHAR2(50)    NOT NULL, 
    master_pw    VARCHAR2(50)    NOT NULL, 
    CONSTRAINT MASTER_PK PRIMARY KEY (master_id)
);



-- group_admin Table Create SQL
CREATE TABLE group_admin
(
    member_id    VARCHAR2(50)    NOT NULL, 
    group_num    INT             NOT NULL, 
    CONSTRAINT GROUP_ADMIN_PK PRIMARY KEY (member_id, group_num)
);


ALTER TABLE group_admin
    ADD CONSTRAINT group_admin_fk FOREIGN KEY (group_num)
        REFERENCES groups (group_num);


ALTER TABLE group_admin
    ADD CONSTRAINT group_admin_fkk FOREIGN KEY (member_id)
        REFERENCES member (member_id);



-- friend Table Create SQL
CREATE TABLE friend
(
    member_id    VARCHAR2(50)    NOT NULL, 
    friend_id    VARCHAR2(50)    NOT NULL, 
    CONSTRAINT FRIEND_PK PRIMARY KEY (member_id, friend_id)
);


ALTER TABLE friend
    ADD CONSTRAINT friend_fk FOREIGN KEY (member_id)
        REFERENCES member (member_id);


ALTER TABLE friend
    ADD CONSTRAINT friend_fkk FOREIGN KEY (friend_id)
        REFERENCES member (member_id);



-- message Table Create SQL
CREATE TABLE message
(
    chat_num                INT               NOT NULL, 
    message_num             INT               NOT NULL, 
    member_id               VARCHAR2(50)      NOT NULL, 
    message_sending_time    TIMESTAMP         NOT NULL, 
    message_content         VARCHAR2(1000)    NOT NULL, 
    message_file            VARCHAR2(200)     NULL, 
    CONSTRAINT MESSAGE_PK PRIMARY KEY (chat_num, message_num)
);


CREATE SEQUENCE message_SEQ
START WITH 1
INCREMENT BY 1;



ALTER TABLE message
    ADD CONSTRAINT message_fk FOREIGN KEY (member_id)
        REFERENCES member (member_id);


--ALTER TABLE message ADD CONSTRAINT message_fkk FOREIGN KEY (chat_num) REFERENCES chat (chat_num);



-- notice Table Create SQL
CREATE TABLE notice
(
    notice_num        INT               NOT NULL, 
    member_id         VARCHAR2(50)      NOT NULL, 
    notice_content    VARCHAR2(1000)    NOT NULL, 
    CONSTRAINT NOTICE_PK PRIMARY KEY (notice_num)
);


CREATE SEQUENCE notice_SEQ
START WITH 1
INCREMENT BY 1;


ALTER TABLE notice
    ADD CONSTRAINT notice_fk FOREIGN KEY (member_id)
        REFERENCES member (member_id);



-- group member Table Create SQL
CREATE TABLE group_member
(
    group_num    NUMBER          NOT NULL, 
    member_id    VARCHAR2(50)    NOT NULL, 
    CONSTRAINT GROUPS_MEMBER_PK PRIMARY KEY (group_num, member_id)
);


ALTER TABLE group_member
    ADD CONSTRAINT group_member_fk FOREIGN KEY (member_id)
        REFERENCES member (member_id);


ALTER TABLE group_member
    ADD CONSTRAINT group_member_fkk FOREIGN KEY (group_num)
        REFERENCES groups (group_num);



-- group_singo Table Create SQL
CREATE TABLE group_singo
(
    group_singo_num       INT               NOT NULL, 
    group_num             INT               NOT NULL, 
    group_singo_reason    VARCHAR2(1000)    NOT NULL, 
    CONSTRAINT GROUP_SINGO_PK PRIMARY KEY (group_singo_num)
);


CREATE SEQUENCE group_singo_SEQ
START WITH 1
INCREMENT BY 1;


ALTER TABLE group_singo
    ADD CONSTRAINT group_singo_fk FOREIGN KEY (group_num)
        REFERENCES groups (group_num);



-- board_singo Table Create SQL
CREATE TABLE board_singo
(
    board_singo_num       INT               NOT NULL, 
    board_num             INT               NOT NULL, 
    board_singo_reason    VARCHAR2(1000)    NOT NULL, 
    CONSTRAINT BOARD_SINGO_PK PRIMARY KEY (board_singo_num)
);


ALTER TABLE board_singo
    ADD CONSTRAINT board_singo_fk FOREIGN KEY (board_num)
        REFERENCES board (board_num);



-- reply_singo Table Create SQL
CREATE TABLE reply_singo
(
    reply_singo_num       INT               NOT NULL, 
    reply_num             INT               NOT NULL, 
    reply_singo_reason    VARCHAR2(1000)    NOT NULL, 
    CONSTRAINT REPLY_SINGO_PK PRIMARY KEY (reply_singo_num)
);


ALTER TABLE reply_singo
    ADD CONSTRAINT reply_singo_fk FOREIGN KEY (reply_num)
        REFERENCES reply (reply_num);



-- friend_request Table Create SQL
CREATE TABLE friend_request
(
    friend_request_num       INT             NOT NULL, 
    member_id                VARCHAR2(50)    NOT NULL, 
    friend_id                VARCHAR2(50)    NOT NULL, 
    friend_request_accept    number          NULL, 
    CONSTRAINT FRIEND_REQUEST_PK PRIMARY KEY (friend_request_num)
);


CREATE SEQUENCE friend_request_SEQ
START WITH 1
INCREMENT BY 1;


ALTER TABLE friend_request
    ADD CONSTRAINT friend_request_fk FOREIGN KEY (member_id)
        REFERENCES member (member_id);


ALTER TABLE friend_request
    ADD CONSTRAINT friend_request_fkk FOREIGN KEY (friend_id)
        REFERENCES member (member_id);



-- one_random_chat Table Create SQL
CREATE TABLE one_random_chat
(
    one_random_num    INT             NOT NULL, 
    member_id         VARCHAR2(50)    NOT NULL, 
    CONSTRAINT ONE_RANDOM_CHAT_PK PRIMARY KEY (one_random_num)
);


CREATE SEQUENCE one_random_chat_SEQ
START WITH 1
INCREMENT BY 1;

ALTER TABLE one_random_chat
    ADD CONSTRAINT one_random_chat_fk FOREIGN KEY (member_id)
        REFERENCES member (member_id);


-- group_ramdom_chat Table Create SQL
CREATE TABLE group_ramdom_chat
(
    group_random_num    INT             NOT NULL, 
    member_id           VARCHAR2(50)    NOT NULL, 
    CONSTRAINT GROUP_RAMDOM_CHAT_PK PRIMARY KEY (group_random_num)
);


CREATE SEQUENCE group_ramdom_chat_SEQ
START WITH 1
INCREMENT BY 1;




ALTER TABLE group_ramdom_chat
    ADD CONSTRAINT group_ramdom_chat_fk FOREIGN KEY (member_id)
        REFERENCES member (member_id);



-- group_join Table Create SQL
CREATE TABLE group_join
(
    group_num    INT             NOT NULL, 
    member_id    VARCHAR2(50)    NOT NULL, 
    CONSTRAINT GROUP_JOIN_PK PRIMARY KEY (group_num, member_id)
);


CREATE SEQUENCE group_join_SEQ
START WITH 1
INCREMENT BY 1;




ALTER TABLE group_join
    ADD CONSTRAINT group_join_fk FOREIGN KEY (member_id)
        REFERENCES member (member_id);


ALTER TABLE group_join
    ADD CONSTRAINT group_join_fkk FOREIGN KEY (group_num)
        REFERENCES groups (group_num);



select * from user_sequences;




-- drop sequences
drop sequence GROUPS_SEQ;
drop sequence BOARD_SEQ;
drop sequence REPLY_SEQ;
drop sequence CHAT_SEQ;
drop sequence MESSAGE_SEQ;
drop sequence NOTICE_SEQ;
drop sequence GROUP_SINGO_SEQ;
drop sequence FRIEND_REQUEST_SEQ;
drop sequence ONE_RANDOM_CHAT_SEQ;
drop sequence GROUP_RAMDOM_CHAT_SEQ;
drop sequence GROUP_JOIN_SEQ;




